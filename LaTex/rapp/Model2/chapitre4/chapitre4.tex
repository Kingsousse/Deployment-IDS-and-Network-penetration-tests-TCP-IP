\setcounter{chapter}{3}
\chapter{Réalisation}
\graphicspath{{Chapitre4/figures/}}

%==================================================================================================%

\section{Introduction}
Suite à l'étude élaborée dans les trois chapitres précédents on a atteint la dernière phase de la réalisation de nos tests. Ce chapitre est destiné pour décrire cette phase et présenter les résultats aux quels on a aboutit.
Nous commencerons d'abord par présenter les différents outils techniques à utiliser pour réaliser le travail.



\section{Environnement de travail}


\subsection{Environnement matriél}

La plate-forme de travail est une machine de caractéristique suivantes :
\begin{maliste}

\item Processeur : Intel core 2 duo 2.00 GHz
\item RAM : 2043 Mo
\end{maliste}

\subsection{Environnement logiciel}

Systéme d'exploitation :
\begin{maliste}

\item Windows vista Edition familial premium
\item Windows Xp sp2
\item Mandriva Linux 2009 spring 
\item Linux Backtrack 4 beta
\end{maliste}
Machine virtuelle :
\begin{maliste}

\item VMware Workstation v6.0.3
\item Sun VirtualBox v3.1.6
\end{maliste}
Et LATEX comme environnement de rédaction du rapport.


\subsection{Back|Track}


\subsubsection{L\textquoteright{}outil}

BackTrack \cite{6} est une distribution GNU/Linux basée sur la distribution
\textit{Slackware} jusqu'à la version 3 et \textit{Ubuntu} depuis
la version 4 apparue en 11 Janvier 2010. Son objectif est de fournir
une distribution regroupant l'ensemble des outils nécessaires aux
tests de sécurité d'un réseau.

Avec ces 300 outils, BackTrack aborde tous les domaines liés aux sécurités
modernes allant de l\textquoteright{}audit réseau à l\textquoteright{}analyse
et l\textquoteright{}identification de vulnérabilités en passant par
divers outils de récupération d\textquoteright{}informations. (\textbf{Fuzzers}
/ Testeurs de sécurité des réseaux filaires / Testeur des réseaux
\textbf{wifi} ...)

BackTrack est principalement connu et utilisé à des fins d\textquoteright{}audit
de réseaux sans fil wifi. Son développement est axé sur la prise en
charge de cartes wifi supportant le mode Monitoring, ce qui permet
la capture de paquets, nécessaire pour le crack de clé \textbf{WEP}/
\textbf{WPA} et autres test (suite de logiciel aircrack-ng par exemple)

BackTrack contient aussi des applications basiques comme un lecteur
multimédia, traitement de texte ... ce qui en fait un système d\textquoteright{}exploitation
polyvalent.


\subsubsection{Installation}

L\textquoteright{}un des principaux intérêts de BackTrack est d'être
disponible sous forme d'un Livecd, c'est à dire qu\textquoteright{}un
ordinateur peut booter directement sur le cd sans avoir à se préoccuper
d\textquoteright{}une quelconque installation avec la possibilité
d\textquoteright{}exécuter chaque outil immédiatement.

Ainsi, tout se passe dans la mémoire RAM de l\textquoteright{}ordinateur
n\textquoteright{}entrainant aucune intervention sur le disque dur
permettant ainsi de l\textquoteright{}utiliser sans risque de perte
de données ou autre. Ce Livecd permet d\textquoteright{}avoir tous
les outils indispensables à la sécurité informatique sans laisser
aucune trace.


\subsubsection{Tests qu'on peut réaliser}

Comme nous avons pu le dire précédemment, l\textquoteright{}objectif
de BackTrack est de fournir une distribution compacte regroupant le
maximum d\textquoteright{}outils nécessaire aux tests de sécurité
d\textquoteright{}un réseau ou d\textquoteright{}application.

Le nombre d\textquoteright{}outils liés à la sécurité informatique
ne cesse de croître avec les versions de BackTrack.
\\

Dans la version 4.0 beta, nous disposons d\textquoteright{}approximativement
300 outils décomposés en 16 catégories. Voici les parties qu\textquoteright{}il
nous est possible d\textquoteright{}utiliser dans de nombreux cas
:


\subsubsection*{Analyse de réseau sans fil}
\begin{description}
\item [{\textit{Aircrack-ng,wesside-ng}}] pour l\textquoteright{}analyse
et le crackage de Wifi.
\item [{\textit{BTscanner,BlueSnarfer}}] pour l\textquoteright{}analyse
et le crackage de Bluetooth.
\end{description}

\subsubsection*{Anonymat}
\begin{description}
\item [{\textit{TOR}}] permet d\textquoteright{}être complètement invisible
sur le net sans laisser la moindre trace à fin d\textquoteright{}éviter
de nombreux démêlés judiciaires, il peut être une bonne chose de ne
pas laisser de traces sur les différents systèmes comme dans les fichiers
de \textbf{logs} par exemple.
\end{description}

\subsubsection*{Attaque de mot de passe}

BackTrack dispose d\textquoteright{}un large panel de possibilité
d\textquoteright{}attaque contre les mots de passe que ce soit des
attaques << en ligne >> ou bien << locale >>.
\begin{description}
\item [{\textit{Hydra}}] concernant les attaques en lignes , il est actuellement
considéré comme l\textquoteright{}un des meilleurs brute forceur en
ligne.
\item [{\textit{RaimbowCrack}}] Concernant les attaques hors lignes, il
est un casseur de mot de passe basé sur les raimbows tables ce qui
le rend excessivement puissant.
\end{description}

\subsubsection*{Collecte d\textquoteright{}informations}

Il faut toujours prendre très au sérieux cette partie qui est la base
de toute attaques de petite ou de grande envergure. Suivant le type
d\textquoteright{}informations que nous désirons rechercher, nous
avons la possibilité de choisir parmi les nombreux outils que nous
propose BackTrack.
\begin{description}
\item [{\textit{Wapiti}}] nous permettre de récupérer des informations
sur les failles Web
\item [{\textit{Nessus}}] nous permettre de visualiser les vulnérabilités
d\textquoteright{}un système d\textquoteright{}exploitation ainsi
que ces services
\item [{\textit{Nmap}}] simplement nous renseigner sur les ports ouverts
\end{description}

\subsubsection*{Pénétration}

l\textquoteright{}étape suivant la récupération d\textquoteright{}information
est en règle générale la pénétration de la cible. 
\begin{description}
\item [{\textit{Métasploit}}] Il contient une base de données d\textquoteright{}environ
300 exploits, capable de simplifier les tests d'intrusion sur des
failles importantes.
\end{description}

\subsubsection*{Reverse engineering}

C'est l'activité qui consiste à étudier un programme pour en déterminer
le fonctionnement interne ou sa méthode de fabrication afin de pouvoir
par exemple s\textquoteright{}octroyer des accès ou des fonctionnalités
ne nous étant pas autorisé initialement.
\begin{description}
\item [{Ollydbg}] outils très performant en matière de cracking pour débogueur/désassembleur
\item [{Hexedit}] comme éditeur hexadécimal
\end{description}

\subsubsection*{Sniffers}

les sniffers sont des logiciels qui peuvent récupérer les données
transitant par le biais d'un réseau local.
\begin{maliste}

\item Dsniff 
\item Ettercap-ng(anciennement Ettercap)
\item Wireshark(anciennement Ethereal)
\end{maliste}

\subsubsection{Evolutions}

BackTrack est à l\textquoteright{}heure actuelle la distribution la
plus aboutie en matière de sécurité informatique. BackTrack se qualifient
tant par le nombre impressionnant d\textquoteright{}outils que leur
par qualité reconnu par les professionnels. Ces nombreux développeurs
et sa large communauté permettent d\textquoteright{}avoir une distribution
de plus en plus stable avec une compatibilité accrue avec les différents
constructeurs de matériels. BackTrack a gagné une grande notoriété
et c\textquoteright{}est pourquoi, en 2006, BackTrack a été élu comme
étant la première distribution de sécurité par \href{http://insecure.org}{insecure.org}.


\section{Les tests réalisés}

Aprés la définition de différents outils technique et environnements
de tests pour l'achèvement de ce travail nous allons dans ce qui suit
présenter les taches et les tests réalisés. 

Nous allons dans cette partie effectuer une série de tests à l\textquoteright{}aide
de Backtrack. Suite à des contraintes de type matériel, la stratégie
adoptée est une stratégie de type interne. Le client et le serveur
sont tous deux situés à l\textquoteright{}intérieur d\textquoteright{}un
réseau local \textbf{Ethernet}. L\textquoteright{}objectif est de
mieux appréhender ce qui sont les failles de sécurité dans un tel
réseau au travers de tests simples.

\subsection{Topologie}

\begin{figure}[!ht]
  \centering
\includegraphics[scale=1.0]{Rvirtuelle.png}
\caption{\label{chap4-1}Le réseau Ethernet utilisé pour les tests}
\end{figure}

Nous avons créé 3 machines virtuelles sur VMware, pour qu\textquoteright{}elles
puissent communiquer directement sur le réseau physique. Pour ce là,
nous avons utilisés le mode \textbf{Host-Only} qui permet de connecter
les cartes réseau (virtuelles) des VM directement à la carte physique.
Cette connexion permet entre autres d\textquoteright{}activer le service
\textbf{DHCP-Server}, afin de délivrer des adresses \textbf{IP} aux
machines virtuelle du réseau \textbf{Host-Only}. Du point de vue de
la \textbf{VM}, c\textquoteright{}est comme si elle été directement
connectée au réseau physique. Techniquement, un \textbf{vHUB} est
crée, et est connecté à la carte réseau physique, via l\textquoteright{}interface
associée. Ceci explique pourquoi il est possible d\textquoteright{}utiliser
des sniffeurs de paquets directement sur l\textquoteright{}interface
dans le but d\textquoteright{}écouter le trafic réseau des machines
virtuelles.


Différents systèmes ont été installés sur ces machines virtuelles.
Les configurations de ces derniers ont été indiquées dans le tableau tab\ref{tabutil}


\begin{table}[!ht]

\begin{center}
\begin{tabular}{|c|c|c|c|c|}
\hline 
\multicolumn{2}{|c|}{\textbf{\small V.M.}} & \textbf{\small VM-1} & \textbf{\small VM-2} & \textbf{\small VM-3}\tabularnewline
\hline
\multicolumn{2}{|c|}{\textbf{\small Adresse IP}} & 192.168.56.102 & 192.168.56.104 & 192.168.56.101\tabularnewline
\hline 
 & {\small Type de carte} & {\small PCnet-FAST III } & {\small PCnet-FAST III } & {\small PCnet-FAST III }\tabularnewline
\textbf{\small Carte réseau} &  & {\small (Am79C793)} & {\small (Am79C793)} & {\small (Am79C793)}\tabularnewline
\cline{2-5} 
 & {\small Adresse MAC} & {\small 08 00 27 1F 04 70} & {\small 08 00 27 1C 73 44} & {\small 08 00 27 2B 50 FD}\tabularnewline
\hline 
\multicolumn{2}{|c|}{\textbf{\small Mémoire vive}} & {\small 512 Mo} & {\small 256 Mo} & {\small 256 Mo}\tabularnewline
\hline 
\multicolumn{2}{|c|}{\textbf{\small OS}} & {\small Linux Backtrack 4 beta} & {\small Linux Mandriva } & {\small Windows XP-sp2}\tabularnewline
\hline
\end{tabular}
\caption{Les configurations des machines virtuelles }
\label{tabutil}
\end{center}
\end{table}

\textbf{\textit{NB}} : cette topologie n'est valable que pour les
deux premiers test (test 1 et test 2 ).


\subsection{Les tests réalisés}


\subsubsection{Test 1 : Scan de vunérabilité }

Le but de ce scan est de détecter des failles de sécurité potentielles
dans les machines d'un réseau. En effet l' identification des vulnérabilités
est inclue dans la phase préparatoire de la démarche utilisée dans
les tests d\textquoteright{}intrusion. Il y a différents scanners
de vulnérabilité (payants et non payants), dont un seul sera examiné.
\\

Alors, on a choisi Nessus, qui est un programme non payant fonctionnant
avec un modèle client-serveur, pour effectuer ce test. Il nous fournira
des rapports détaillés et nous informera si notre ordinateur testé
comporte des failles de sécurité (Nessus v4.2 dispose d\textquoteright{}une
base de 35973 plugins couvrant ainsi un nombre de failles impressionnantes)
et proposera même des solutions pour ces failles.


\subsubsection*{Paramétrage}
Ce premier essai est réalisé sur une machine Linux VM-3, ayant comme
services un serveur de types SSH, FTP,SMTP, HTTP et HTTPS. Les paramétres
du test sont comme suit : 
\begin{maliste}
\item Nessus 4.2 (version Windows) est installé sur la machine VM-3 en 2
étapes : 

\begin{maliste}
\item installation le logiciel et ses plugins
\item création d'un nouveau compte utilisateur dans Nessus Server Manager
\end{maliste}
\item Les essais vont être effectués depuis le client Nessus (déjà installé
avec le serveur) se trouvant dans VM-3 et plus précisément dans l'adesse <<
https://127.0.0.1:8834/ >>. 
\item La machine cible est VM-2.
\end{maliste}
pour lancer le scan il faut suivre les 2 étapes :


\subsubsection*{\textit{Étapes 1 : Ajouter une politique de scan}}

L'ajout d'une politique de scan avec \textquotedblleft{} Add Policy
\textquotedblright{}(voir fig \ref{chap4plice}) nous permet :



\begin{maliste}
\item d'indiquer le choix des scanners de port utilisé(1). 
\item d'éviter de faire tomber le serveur ciblé par l'activation de l\textquoteright{}option
<< safe checks >>(2).
\item choisir le nombre d\textquoteright{}ordinateurs à tester en même temps(3).
\item possibilité d'activer ou de désactiver les plugins de scan
(35980 plugins distribués en 42 familles).
\end{maliste}

\begin{figure}[!ht]
  \centering
\includegraphics[scale=0.50]{policiermod.png}
\caption{\label{chap4plice}La fenêtre d'ajout de polilitic de scan \textquotedblleft{}Edit Policy\textquotedblright{}}
\end{figure}


\subsubsection*{\textit{Étapes 2: Ajouter un scan}}

L'ajout du scan avec \textquotedblleft{} Add Scan \textquotedblright{}(voir fig \ref{scann}) se réalise par :
\begin{maliste}
\item donner un nom du scan \textquotedblleft{}scan du machine VM-1\textquotedblright{}(1)
\item choisir la politique du scan(2)
\item donner l'adresse IP du machine VM-3 \textquotedblleft{}192.168.56.104\textquotedblright{}(3)
\end{maliste}

\begin{figure}[!ht]
  \centering
\includegraphics[scale=0.66]{scann.png}
\caption{\label{scann}La fenêtre d'ajout de scan \textquotedblleft{}Edit Scan\textquotedblright{}}
\end{figure}

\subsubsection*{Exploitation}

Lors du lancement, le programme va scanner tous les ports de la machine
pour connaître les services qui sont disponibles, puis les essais
de vulnérabilité commencent : le test a duré environ 5 minutes. Le
résultat de scan est visible sur la Figure \ref{scan6mod}, mais on peut constater
que ce n\textquoteright{}est pas très parlant. Alors il est possible
de sauver ce test en sélectionnant le bouton {}`` Download '' (1)et
en indiquant le type de format : HTML, .nessus , .nessus (v1).
\\

Il est préférable de sauver sous le format HTML, de cette manière
il est possible d\textquoteright{}analyser les vulnérabilités du système
facilement. Sur cette page HTML sont expliqués le type d\textquoteright{}attaque
des vulnérabilités et les solutions. 
\\
Voici ce qui est dit au sujet du serveur FTP : il était possible de
mettre hors service le serveur FTP en faisant 3000 connections sur
celui-ci : un attaquant peut employer ce défaut pour empêcher ce service
de travailler correctement. Et la solution à ce problème est de télécharger
la mise à jour du serveur.Ainsi, une telle explication est faite à
chaque vulnérabilité détectée.

\begin{figure}[!ht]
  \centering
\includegraphics[scale=0.50]{scan6mod.png}
\caption{\label{scan6mod}Résultat d'analyse du machine VM-2 }
\end{figure}


\subsubsection{Test 2 : Sniffer le traffic réseau}

À fin de récupérer les mots de passe circulant dans le flux de notre
réseau ou\textquoteright{} la grande majorité des protocoles font
transiter les informations en clair, c\textquoteright{}est-à-dire
de manière non chiffrée. Ainsi, lorsqu\textquoteright{}un utilisateur
du réseau consulte un serveur via le protocole \textbf{FTP} ou \textbf{SFTP}, ou accéder
sur des sites dont l\textquoteright{}adresse commence par \textbf{HTTP} ou
\textbf{HTTPS}, toutes les informations envoyées ou reçues peuvent être interceptées.
\\

On va utilisée :
\begin{maliste}

\item \underbar{Wireshark} pour récupérer les mot de passe circulant dans
les paquets \textbf{FTP} et \textbf{HTTP}
\item \underbar{Ettercap} pour récupérer les mot de passe circulant dans
les paquets \textbf{FTPS} et \textbf{HTTPS}
\end{maliste}
Suite au résultat obtenue par le Test 1, on a constaté que le port
\textbf{FTP} est ouvert ce qui nous a donné la possibilité de récupérer un
login et son mot de passe pour accéder au serveur \textbf{FTP}.


\subsubsection*{\underbar{ 2-A : En utilisant Wireshark}}


\subsubsection*{Paramétrage}
\begin{maliste}

\item le sniffeur est installer dans VM-1 à fin de capturer le traffic entre VM-2
et VM-3.
\item le serveur \textbf{FTP} (ou Web) est installer dans le VM-2.
\item le client \textbf{FTP} (ou Web) est le VM-3.
\end{maliste}

\subsubsection*{Exploitation}
\begin{enumerate}
\item On lance la capture des trame dans l'analyseur Wireshark dans VM-1.
\item On fait un test de connection, par login et mot de passe, du client
VM-3 au serveur VM-2(l'adresse est ftp://192.168.56.104/).
\item On fait le filtrage des paquets en capture et impression (avec personnalisation
de l\textquoteright{}utilisation de la couleur) 
\end{enumerate}
voici le détail des échanges entre le client et le serveur :

\begin{figure}[!ht]
  \centering
\includegraphics[scale=0.66]{capture1.jpg}
\caption{\label{chap4-2}Capture du traffic entre le client FTP et le serveur FTP avec Wireshark}
\end{figure}

On peut s'apercevoir que dans les échanges, les ligne avec l'ID entre
28 et 33 contient l'identifiant et le mot de passe de l'utilisateur
\textbf{FTP} situé dans VM-1. 


\subsubsection*{\underbar{Test 2-B : En utilisant Ettercap}}


\subsubsection*{Paramétrage}
\begin{maliste}

\item le sniffeur est installer dans VM-1

\begin{itemize}
\item sa configuratuion par la commande : {}``vim /etc/etter.conf''
\end{itemize}
\item le serveur Web sécurisé (ou FTP sécurisée) est installer dans le VM-2.
\item le client Web sécurisé (ou FTP sécurisée) est le VM-3.
\end{maliste}

\subsubsection*{Exploitation}
\begin{enumerate}
\item On lance le sniffeur par la commande :
\begin{verbatim}
ettercap -TqM ARP :REMOTE /192.168.56.101/ / 192.168.56.104/
\end{verbatim}
 
\item On fait le même test de connection dans le Test 2-A (l'adresse est
ftp://192.168.56.104/).
\item De plus on fait aussi un test de connection sur le serveur web sécurisé(l'adresse
est https://192.168.56.104/toto/secr.php). 
\end{enumerate}

Comme résultat, Ettercap nous donne les logins(USER ) et leurs
mot de passe(PASS). Il distingue automatiquement les mots de passe
et les logins. Les résultats des échanges entre le client et
le serveur dans la figure \ref{chap4-3}.

\begin{figure}[!ht]
  \centering
\includegraphics[scale=0.8]{ettercap.png}
\caption{\label{chap4-3}Capture du traffic entre le client FTP et le serveur FTP avec Ettercap}
\end{figure}



\subsubsection{Test 3 : Crackage d\textquoteright{}un clé WEP dans un réseau sans
fil (Wi-Fi)}

La technologie sans fil\cite{Cederic} Wi-Fi (IEEE 802.11) s\textquoteright{}appuie
sur les ondes hertziennes pour établir les communications entre les
équipements. Il suffit de se trouver dans la zone de couverture des
émetteurs pour écouter les données.Ainsi, Le protocole \textbf{WEP}
chiffre chaque trame 802.11 échangée entre l\textquoteright{}émetteur
et le récepteur (point d\textquoteright{}accès ou client).
\\

Il existe plusieurs méthodes pour casser une clé WEP. On cite le processus
de crackage par Aircrack-ng. La suite aircrack-ng comprend plusieurs
programmes dont les 3 principaux sont : 
\begin{lyxlist}{00.00.0000}
\item [{\textbf{Airodump-ng}}] le logiciel de capture de paquets, c'est lui qui
scan les réseaux et conserve les paquets qui serviront à décrypter
la clé.
\item [{\textbf{Aireplay-ng}}] un logiciel dont la principale fonction est l'envois
de paquets dans le but de stimuler le réseau et capturer plus de paquets.
\item [{\textbf{Aircrack-ng}}] le logiciel de crack de clé, c'est un logiciel qui
à partir des informations capturées à l'aide d'airodump va nous donner
la clé (si on en a eu un nombre suffisant de paquets).
\end{lyxlist}
le processus d'attaque est situé dans la figure \ref{chap4-4}

\begin{figure}[!ht]
  \centering
\includegraphics[scale=1]{lesphase.jpg}
\caption{\label{chap4-4}le processus de crackage du clé Wi-Fi}
\end{figure}


\subsubsection*{Paramétrage}
\begin{maliste}

\item M-1 est la machine du test de crackage qui a les même paramétre que
VM-1 avec une carte wifi \textit{chipset atheros} .
\item Le point d'accés est R, un routeur wifi connecté à l'Internet .
\item Une machine M-2 déja connecté avec le point d'accés R par la clé secrète,
alors il y'a des échanges de paquets entre ces derniers.(voir fig \ref{chap4-5}
)
\end{maliste}

\begin{figure}[!ht]
  \centering
\includegraphics[scale=0.66]{terminaux.png}
\caption{\label{chap4-5}Le réseau du test 3 }
\end{figure}

\subsubsection*{Exploitation }


\subsubsection*{\textit{Phase 1}}

On commence à chercher le réseaux wifi voulu avec airodump par la
commande : 
\begin{verbatim}
airodump-ng interface
\end{verbatim}

Une fois lancé airodump,
on se trouve dans l'interface indiqué dans la figure

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{figure}[!ht]
  \centering
\includegraphics[scale=0.66]{air1.png}
\caption{\label{chap4-7}le processus de crackage du clé Wi-Fi}
\end{figure}

\begin{maliste}

\item La colonne \textbf{BSSID} correspond à l'adresse mac des points d'accès
(R)
\item La colonne \textbf{ESSID} correspond au nom du réseau
\item La colonne \textbf{power} donne une indication de la puissance de
reception, cette information peut foirer (-1) cela n'influ en rien
la puissance de reception réelle , une bonne indication est la vitesse
de défilement des beacons
\item La  partie (1) correspond aux points d'accès et la seconde partie
aux stations ( l' ordinateur qui se connecte à R c'est M-2).
\item Airodump nous indique dans la colonne \textbf{ENC} le cryptage utilisé
(WEP, WPA, OPN).On choisie notre réseau crypter par WEP.
\item La colonne qui nous intéresse est la colonne des \textbf{IVs}, la
colonne \textbf{\#data}, c'est ces \textquotedbl{}bouts de fichiers\textquotedbl{}
qui vont nous permettre de cracker notre clé wep aucun rapport avec
la colonne beacons completement inutile pour le crack.
\end{maliste}

\subsubsection*{\textit{Phase 2 et 3 :} }

Lancer le scann aprés avoir choisie le réseau par la commande : 
\begin{verbatim}
airodump-ng --write NomFichierSortie --channel NumeroChannel -b @mac_R Interface
\end{verbatim}
Dans notre cas:
\begin{verbatim}
airodump-ng --write tuto --channel 11 -b 02:1F:3B:00:09:2D ath0
\end{verbatim}
dont les paramètres sont:
\begin{maliste}
\item \textquotedbl{}\textit{--write tuto}\textquotedbl{} \textit{--write} indique que l'on
souhaite enregistrer la capture, il est suivis du nom du fichier dans
lequel on l'enregistre justement.
\item \textquotedbl{}\textit{--channell XX}\textquotedbl{} Indique sur quel channel
on scan.
\end{maliste}
Il est necessaire de connaitre l'adresse mac d'un ordinateur (station)
déja accepté par le point d'accès R (dans notre cas l'odinateur est
M-2) car Pour aireplay, le programme qui va envoyer des paquets, a
justement besoin de l'adresse mac de M-2. En fait, on se fait passer
pour l'ordinateur M-2 qui a le droit d'accès au point d'accés R en
spoofant son adresse mac pour pouvoir par exemple injecter des paquets
ensuite.


\subsubsection*{\textit{Phase 4}}

Maintenant que l'on sait que le cryptage est WEP, qu'une station est
présente et qu'il y a du trafic (quelques data en peu de temps), on
va lancer aireplay, un injecteur de paquets pour accélérer le trafic
et surtout stimuler les IVs.
\begin{maliste}
\item On va en premier lieu tester l'association avec le point d'accès avec
une attaque \textquotedbl{}-1\textquotedbl{} dite de fake authentication.Cette
étape n'est pas indispensable, elle peut servir à tester si le point
d'accès possède un filtrage d'addresse mac. La synthaxe est la suivante:

\begin{verbatim}
aireplay-ng -1 0 -e ESSID -a @mac_R -h @mac_M-2 interface
\end{verbatim}

\begin{maliste}

\item << \textit{-1 0} >> -1 indique une fake authentication
et 0 indique le temps a laisser entre 2 tentatives (ici nul).
\item << \textit{-e ESSID} >> ici il faut remplacer ESSID
par le nom du reseau colonne ESSID.
\item << \textit{-a adresse-mac-de-R} >> colonne BSSID.
\item << \textit{-h adresse-mac-de-M2} >> colonne
STATION.
\item << \textit{interface} >> a remplacer par le nom de
votre interface (rausb0, ath1 ...)
\end{maliste}
\item En deuxième lieu, on va faire des injections de paquets. Elle est la
clé pour réussir cette crack wep rapidemment. En effet il est necessaire
de capturer beaucoup de Ivs pour trouver la clé wep. L'attaque la
plus prolifique pour générer des Ivs est l'attaque << -3 >>
dite de réinjection d'ARP : 
\begin{verbatim}
aireplay-ng -3 -e ESSID -b @mac_R -h @mac_M-2 interface
 \end{verbatim}
\end{maliste}
Aireplay nous sauvegarde donc les arp capturés dans un fichier qu'il
créé à chaque fois qu'il est lancé. Ce fichier se trouve dans le répertoire
à partir duquel nous avons lancé airplay.


\subsubsection*{\textit{Phase 5}}

Sachant qu'il faut environ 300 000 IVs pour cracker une clé wep 64bits
et environ de 1 000 000 pour une clé wep 128, cette phase est la
plus importante de tout le processus du crackage.
\\

On lancant aircrack-ng par 
\begin{verbatim}
aircrack-ng -x *.cap *.ivs 
 \end{verbatim}

\begin{figure}[!ht]
  \centering
\includegraphics[scale=1]{air2.png}
\caption{\label{chap4-6}Résultat obtenu par Aircrack-ng }
\end{figure}

Il nous affiche tous les réseaux qu'il a rencontré, leur cryptage
et le nombre de IVs correspondant (voir chap4-6). Il suffit
d'entrer le numéro de notre réseau, de lancer aircrack et il commence
à cracker la clé wep. Aprés une attente, on a obtenue le mot de
passe décrypté << Decrypted correctly : 100\% >>


\subsubsection*{\textit{Phase 6}}
Cette phase n'est qu'un test du clé cryptée si elle est la bonne ou non. Alors ce n'est qu'une demande à rejoindre 
le réseau et d'utiliser les ressources disponibles: Accés Internet, Partage de fichier... 

\section{Conclusion}
  
Dans ce chapitre, nous avons pu mettre en évidence quelques exemples d'utilisation des outils d'analyse réseaux, de test de vulnérabilité et des tests d'intrusion. Ces outils ont une diversité d'utilisation et une multitude de fonctionnalités que nous n'avons pas pu les explorer tous.
